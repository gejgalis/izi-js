/**
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 izi-js contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
!function(a){function b(){var a,b={ioc:{bean:{}},utils:{},model:{},behavior:{impl:{}},binding:{impl:{nested:{}}},events:{},queue:{impl:{}}};return!function(a){a.utils.forEach=function(){function a(a,b,c){Array.prototype.forEach.call(a,b,c)}function b(a,b,c){var d,e=a.length;for(d=0;e>d;d+=1)b.call(c,a[d],d,a)}function c(){return"function"==typeof Array.prototype.forEach}return c()?a:b}()}(b),!function(a){a.utils.typeOf=function(a){if(void 0===a)return"undefined";if(null===a)return"null";switch(typeof a){case"string":return"String";case"number":return"Number";case"boolean":return"Boolean";case"function":return"Function"}switch(Object.prototype.toString.call(a)){case"[object Array]":return"Array";case"[object Date]":return"Date";case"[object RegExp]":return"RegExp";case"[object Boolean]":return"Boolean";case"[object Number]":return"Number"}if("object"==typeof a)return"Object";throw new Error("Couldn't find type of given value")}}(b),!function(a){var b=function(b){function c(){j.observers=[],a.utils.forEach(f,function(b){if(b.isKeyboardEventConfig)j.observers.push(h.iziObserveKeyStroke?h.iziObserveKeyStroke(b,d,e,g):i.observeKeyStroke(h,b,d,e,g));else if(b.isEventConfig)j.observers.push(h.iziObserveWidget?h.iziObserveWidget(b,d,e,g):i.observeWidget(h,b,d,e,g));else{if("Function"!==a.utils.typeOf(b))throw new Error("Incorrect event type. Expecting izi.event.* or 'eventType' or function(target, action, scope, eventOptions)");j.observers.push(b(h,d,e,g))}})}var d=b.getAction(),e=b.getScope(),f=b.getEvents(),g=b.getEventOptions(),h=b.getDispatcher(),i=b.getImpl(),j=this;c(),b.behavior=this};b.prototype.stopObserving=function(){a.utils.forEach(this.observers,function(a){a()})},a.behavior.OnWidget=b}(b),!function(a){var b=function(a){this.config=a};b.prototype.on=function(b){return new a.behavior.OnWidget(this.config.withDispatcher(b))},a.behavior.WhenWidget=b}(b),!function(a){a.behavior.OnModel=function(b){function c(){d.apply(e,arguments)}var d=b.getAction(),e=b.getScope(),f=b.getDispatcher(),g=b.getModelProperties(),h=[];b.behavior=this,a.utils.forEach(g,function(a){h.push(b.iziApi.bind({executeAtStartup:!1}).valueOf(f,a).to(c))}),this.stopObserving=function(){a.utils.forEach(h,function(a){a.unbind()})}}}(b),!function(a){var b=function(a){this.config=a};b.prototype.on=function(b){return new a.behavior.OnModel(this.config.withDispatcher(b))},a.behavior.WhenModel=b}(b),!function(a){var b="preventDefault",c="stopPropagation",d="both",e=function(a){this.eventType=a,this.modifiers={shift:!1,ctrl:!1,alt:!1},this.stopEventType=void 0};e.prototype.isEventConfig=!0,e.prototype.shift=function(){return this.modifiers.shift=!0,this},e.prototype.ctrl=function(){return this.modifiers.ctrl=!0,this},e.prototype.alt=function(){return this.modifiers.alt=!0,this},e.prototype.stopEvent=function(){return this.stopEventType=d,this},e.prototype.stopPropagation=function(){return this.stopEventType=c,this},e.prototype.preventDefault=function(){return this.stopEventType=b,this},e.prototype.isExpectedShiftKey=function(){return this.modifiers.shift},e.prototype.isExpectedCtrlKey=function(){return this.modifiers.ctrl},e.prototype.isExpectedAltKey=function(){return this.modifiers.alt},e.prototype.getEventType=function(){return this.eventType},e.prototype.shouldStopPropagation=function(){return this.stopEventType===c||this.stopEventType===d},e.prototype.shouldPreventDefault=function(){return this.stopEventType===b||this.stopEventType===d},e.prototype.matchesModifiers=function(a,b,c){return this.isExpectedShiftKey()===a&&this.isExpectedCtrlKey()===b&&this.isExpectedAltKey()===c},a.events.EventConfig=e}(b),!function(a){var b=function(a){this.config=a};b.prototype.when=function(){for(var b,c,d,e=[],f=arguments.length-1;f>=0;f--)if(c=arguments[f],d=a.utils.typeOf(c),"String"===d)e.push(new a.events.EventConfig(c));else if(c.isEventConfig||"Function"===d)e.push(c);else{if("Object"!==d)throw new Error("Incorrect event types/options arguments");b=c}return new a.behavior.WhenWidget(this.config.withEvents(e).withEventOptions(b))},b.prototype.whenChangeOf=function(){return new a.behavior.WhenModel(this.config.withModelProperties(Array.prototype.slice.call(arguments)))},b.prototype.on=function(b){var c=this.config.action;if("Function"===a.utils.typeOf(c.register))return c.register(b),{stopObserving:function(){c.unregister(b)}};throw new Error("Use on(target) method only for custom registrars: izi.perform({register: function (target){...}).on(target)")},a.behavior.Perform=b}(b),!function(a){var b=function(a,b){this.impl=a,this.iziApi=b};b.prototype.withDispatcher=function(a){return this.dispatcher=a,this},b.prototype.withEvents=function(a){return this.events=a,this},b.prototype.withEventOptions=function(a){return this.eventOptions=a,this},b.prototype.withAction=function(a){return this.action=a,this},b.prototype.withScope=function(a){return this.scope=a,this},b.prototype.withModelProperties=function(a){return this.modelProperties=a,this},b.prototype.getAction=function(){return"function"==typeof this.action||this.scope?this.action:this.getScope()[this.getImpl().defaultPerformFunction]},b.prototype.getScope=function(){return"function"==typeof this.action||this.scope?this.scope:this.action},b.prototype.getEvents=function(){return this.events},b.prototype.getEventOptions=function(){return this.eventOptions},b.prototype.getDispatcher=function(){return this.dispatcher.delegatedIn||this.dispatcher},b.prototype.getImpl=function(){return this.impl},b.prototype.getModelProperties=function(){return this.modelProperties},a.behavior.Config=b}(b),!function(a){a.behavior.register=function(b,c){if(!b.defaultPerformFunction)throw new Error("Behavior implementation must have defined property: defaultPerformFunction: 'someFunctionName'");if(!b.observeWidget)throw new Error("Behavior implementation must have defined function observeWidget (widget, eventConfig, action, scope, options)");if(!b.observeKeyStroke)throw new Error("Behavior implementation must have defined function observeKeyStroke (widget, keyboardConfig, action, scope, options)");return function(d,e){if(0===arguments.length){var f=[],g=function(d,e){var g=new a.behavior.Config(b,c).withAction(d).withScope(e);return f.push(g),new a.behavior.Perform(g)};return g.stopObserving=function(){a.utils.forEach(f,function(a){a.behavior.stopObserving()})},g}return new a.behavior.Perform(new a.behavior.Config(b,c).withAction(d).withScope(e))}}}(b),!function(a){a.utils.hasOwnProperty=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)}}(b),!function(a){a.utils.mergeObjects=function(){function b(b,c){for(var d in b)a.utils.hasOwnProperty(b,d)&&(c[d]=b[d])}return function(){for(var a={},c=0;c<arguments.length;c++)b(arguments[c],a);return a}}()}(b),!function(a){a.utils.indexOf=function(){function a(a,b){return Array.prototype.indexOf.call(a,b)}function b(a,b){var c,d=a.length;for(c=0;d>c;c+=1)if(a[c]===b)return c;return-1}function c(){return"function"==typeof Array.prototype.indexOf}return c()?a:b}()}(b),!function(a){a.utils.removeItem=function(b,c){var d=a.utils.indexOf(b,c);-1!==d&&b.splice(d,1)}}(b),!function(a){var b=function(a){this.options={auto:!0,executeAtStartup:!0,debug:!1},this.impl=a,this.triggerProperties=[],this.bindings=[]};b.prototype.withOptions=function(b){return this.options=a.utils.mergeObjects(this.options,b),this},b.prototype.withBindings=function(a){return this.bindings=a,this},b.prototype.withCallerLineProvider=function(a){return this.callerLineProvider=a,this},b.prototype.withSource=function(a){return this.source=a,this},b.prototype.withSourceProperties=function(a){return this.sourceProperties=a.constructor===Array?a:[a],this},b.prototype.withTarget=function(a){return this.target=a,this},b.prototype.withTargetProperty=function(a){return this.targetProperty=a,this},b.prototype.withFormatter=function(a){return this.formatter=a,this},b.prototype.addTriggerProperty=function(a){this.triggerProperties.push(a)},b.prototype.addBinding=function(a){this.bindings.push(a)},b.prototype.removeBinding=function(b){a.utils.removeItem(this.bindings,b)},a.binding.Config=b}(b),!function(a){a.utils.curry=function(a,b){return function(){a.apply(b,arguments)}}}(b),!function(a){a.utils.findClosure=function(a,b,c){var d,e,f;for(d=0;d<a.length;d+=1)if(e=a[d],f=e.apply(c,b))return f;throw new Error("Closure not found")}}(b),!function(a){a.utils.trim=function(a){return a.replace(/^\W+/,"").replace(/\W+$/,"")}}(b),!function(a,b){var c;c="console"in b?function(){b.console.log.apply?b.console.log.apply(b.console,arguments):b.console.log(Array.prototype.slice.call(arguments))}:function(){},a.utils.log=function(){c.apply(b,arguments)}}(b,this),!function(a){function b(){throw new Error("twoWay() method may be used only once")}var c=a.utils.forEach,d=a.utils.curry,e=a.utils.findClosure,f=a.utils.trim,g=a.utils.log,h={},i=function(a){this.impl=a.impl,this.source=a.source.delegatedIn||a.source,this.sourceProperties=a.sourceProperties,this.triggerProperties=a.triggerProperties,this.target=a.target.delegatedIn||a.target,this.targetProperty=a.targetProperty,this.formatter=a.formatter,this.sourceReaders={},this.targetReader=void 0,this.targetWriter=void 0,this.observers=[],this.options=a.options,this.getCallerLine=a.callerLineProvider,this.registerReadersAndWriters(),this.options.auto&&(this.options.executeAtStartup&&this.transferValue(),this.bind()),a.addBinding(this)};i.prototype.getFormattedValues=function(a,b){var d,e=[],f=this.sourceReaders,g=this.formatter;if(c(b,function(b){d=f[b],e.push(d(a,b))}),g&&"function"==typeof g)return g.apply(null,e);if(1===e.length)return e[0];throw new Error("You must use formatter if you want to bind more properties than one. Ex: izi.bind().valueOf(model, 'firstName', 'lastName').through(concatFormatter)...")},i.prototype.debugBinding=function(a){var b;this.options.debug&&(b=f(this.getCallerLine()),g("[BINDING] "+b,{source:this.source,sourceProperties:this.sourceProperties,target:this.target,targetProperty:this.targetProperty,triggerProperties:this.triggerProperties,value:a}))},i.prototype.transferValue=function(){var a,b=this.source,c=this.sourceProperties,d=this.getFormattedValues(b,c),e=this.targetReader,f=this.targetWriter,g=this.target,i=this.targetProperty;try{a=e(g,i)}catch(j){a=h}d!==a&&(this.debugBinding(d),f(g,i,d))},i.prototype.getChangeObserver=function(b,c,d,f,h){var i=this.impl;try{return e(i.changeObservers,[b,c,d,f,h],this)}catch(j){if(!this.options.allowNotWatchable)throw new Error("Could not find change observer for: "+b+" and property: "+c);return a.isDebug&&g("[BINDING] Could not find change observer for:",b,"and property:",c),function(){return function(){}}}},i.prototype.registerReadersAndWriters=function(){var a=this.source,b=this.target,d=this.targetProperty,f=this.sourceProperties,g=this.sourceReaders,i=this.impl.valueReaders,j=this.impl.valueWriters;c(f,function(b){try{g[b]=e(i,[a,b,"sourceReader"],this)}catch(c){throw new Error("Could not find reader function for: "+a+" using property: "+b)}});try{this.targetReader=e(i,[b,d,"targetReader"],this)}catch(k){this.targetReader=function(){return h}}try{this.targetWriter=e(j,[b,d],this)}catch(k){throw new Error("Could not find writer function for: "+b+" using property: "+d)}},i.prototype.bind=function(){var a=this.sourceProperties,b=this.triggerProperties,e=this.source,f=this.target,g=this.targetProperty,h=b.concat(a),i=this.observers,j=d(this.transferValue,this),k=this;c(h,function(a){var b=k.getChangeObserver(e,a,f,g,j);i.push(b(e,a,f,g,j))}),this.reverseBinding&&this.reverseBinding.bind()},i.prototype.stopObserving=function(){this.unbind()},i.prototype.unbind=function(){c(this.observers,function(a){a()}),this.reverseBinding&&this.reverseBinding.unbind()},i.prototype.twoWay=function(){if(this.formatter)throw new Error("Two way binding doesn't allow to use .through(fn) function");if("Function"===a.utils.typeOf(this.target))throw new Error("Two way binding doesn't allow to use function as a target");var c=new a.binding.Config(this.impl).withOptions(this.options).withSource(this.target).withSourceProperties(this.targetProperty).withTarget(this.source).withTargetProperty(this.sourceProperties[0]).withCallerLineProvider(this.getCallerLine);return this.reverseBinding=new a.binding.Binding(c),this.twoWay=b,this},i.prototype.execute=function(){this.transferValue()},a.binding.Binding=i}(b),!function(a){var b=function(a){this.config=a};b.prototype.to=function(b,c){return 0===arguments.length?this:new a.binding.Binding(this.config.withTarget(b).withTargetProperty(c))},b.prototype.valueOf=function(a){return this.to(a,"value")},b.prototype.textOf=function(a){return this.to(a,"text")},b.prototype.selectedItemsOf=function(a){return this.to(a,"selectedItems")},b.prototype.through=function(a){return this.config.withFormatter(a),this},b.prototype.onChangeOf=function(a){return this.config.addTriggerProperty(a),this},a.binding.ValueOf=b}(b),!function(a){a.utils.getCallerLineProvider=function(b){if(!a.isDebug)return function(){return"Line numbers are available only in debug version of izi-js"};var c=Error();return function(){if(c.stack){var a=c.stack.split("\n"),d=navigator.userAgent.indexOf("WebKit")>-1?3+b:1+b;return a[d]}return" [IE doesn't provide line number in call stack]"}}}(b),!function(a){var b=function(a){this.config=a};b.prototype._valueOf=function(b,c){arguments.length>2&&(c=Array.prototype.slice.call(arguments,1));var d=this.cloneConfig().withSource(b).withSourceProperties(c||"value").withCallerLineProvider(a.utils.getCallerLineProvider(2));return new a.binding.ValueOf(d)},b.prototype.valueOf=function(){return this._valueOf.apply(this,arguments)},b.prototype.selectedItemsOf=function(a){return this._valueOf(a,"selectedItems")},b.prototype.cloneConfig=function(){return new a.binding.Config(this.config.impl).withBindings(this.config.bindings).withOptions(this.config.options)},b.prototype.unbindAll=function(){a.utils.forEach(this.config.bindings,function(a){a.unbind()})},b.prototype.executeAll=function(){a.utils.forEach(this.config.bindings,function(a){a.execute()})},a.binding.Bind=b}(b),!function(a){a.binding.impl.createObserver=function(a,b){return function(){return a.apply(this,arguments)?b:null}}}(b),!function(a){function b(a){return a.iziObserveProperty}function c(a,b,c,d,e){return a.iziObserveProperty(b,e)}a.binding.impl.customPropertyObserver=a.binding.impl.createObserver(b,c)}(b),!function(a){a.binding.impl.createReader=function(a,b){return function(){return a.apply(this,arguments)?b:null}}}(b),!function(a){a.utils.capitalize=function(a){return a.charAt(0).toUpperCase()+a.substr(1)}}(b),!function(a){a.utils.getterOf=function(b){return"get"+a.utils.capitalize(b)}}(b),!function(a){a.binding.impl.readByGet=function(){function b(a){return"function"==typeof a.get}function c(a,b){return a.get(b)}return a.binding.impl.createReader(b,c)}(),a.binding.impl.readByCapitalizedGetter=function(){function b(b,c){return b[a.utils.getterOf(c)]()}function c(b,c){return"String"===a.utils.typeOf(c)&&"function"==typeof b[a.utils.getterOf(c)]}return a.binding.impl.createReader(c,b)}(),a.binding.impl.readByFunction=function(){function b(a,b){return a[b]()}function c(a,b){return"function"==typeof a[b]}return a.binding.impl.createReader(c,b)}(),a.binding.impl.readFromProperty=function(){function b(a,b){return a[b]}function c(){return!0}return a.binding.impl.createReader(c,b)}(),a.binding.impl.readFromOwnedProperty=function(){function b(a,b){return a[b]}function c(b,c){return a.utils.hasOwnProperty(b,c)}return a.binding.impl.createReader(c,b)}()}(b),!function(a){a.binding.impl.createWriter=function(a,b){return function(){return a.apply(this,arguments)?b:null}}}(b),!function(a){a.binding.impl.writeBySet=function(){function b(a){return"function"==typeof a.set}function c(a,b,c){a.set(b,c)}return a.binding.impl.createWriter(b,c)}(),a.binding.impl.writeByCapitalizedSetter=function(){function b(b,c){return"String"===a.utils.typeOf(c)&&"function"==typeof b["set"+d(c)]}function c(a,b,c){a["set"+d(b)](c)}var d=a.utils.capitalize;return a.binding.impl.createWriter(b,c)}(),a.binding.impl.writeToProperty=function(){function b(){return!0}function c(a,b,c){a[b]=c}return a.binding.impl.createWriter(b,c)}(),a.binding.impl.writeToOwnedProperty=function(){function b(b,c){return a.utils.hasOwnProperty(b,c)}function c(a,b,c){a[b]=c}return a.binding.impl.createWriter(b,c)}(),a.binding.impl.writeByFunction=function(){function b(b){return"Function"===a.utils.typeOf(b)}function c(a,b,c){a.call(b,c)}return a.binding.impl.createWriter(b,c)}(),a.binding.impl.writeToFunction=function(){function b(b,c){return"Function"===a.utils.typeOf(b[c])}function c(a,b,c){a[b](c)}return a.binding.impl.createWriter(b,c)}()}(b),!function(a){a.binding.impl.nested.isNestedProperty=function(b){return"String"===a.utils.typeOf(b)&&b.indexOf(".")>-1}}(b),!function(a){function b(b,c){return a.binding.impl.nested.isNestedProperty(c)}function c(b,c,d,e,f){var g=b.iziNestedWatchers[c];return g.onValueChanged(f),a.utils.curry(g.stopObserving,g)}a.binding.impl.nested.nestedObserver=a.binding.impl.createObserver(b,c)}(b),!function(a){var b=function(a,b){this.path=a.split("."),this.path.pop(),this.readers=b};b.prototype.findFor=function(b){for(var c=b,d=0;d<this.path.length;d++){var e=this.path[d];try{var f=a.utils.findClosure(this.readers,[c,e,"targetReader"]);if(c=f(c,e),!c)break}catch(g){break}}return d===this.path.length?c:void 0},a.binding.impl.nested.TargetFinder=b}(b),!function(a){var b=function(a,b){this.property=a.split(".").pop(),this.writers=b};b.prototype.writeValue=function(b,c){try{var d=a.utils.findClosure(this.writers,[b,this.property,c]);d(b,this.property,c)}catch(e){}},a.binding.impl.nested.TargetWriter=b}(b),!function(a){a.binding.impl.nested.nestedWriter=function(){function b(b,c){var g=a.binding.impl.nested.isNestedProperty(c);return g&&(d=new a.binding.impl.nested.TargetFinder(c,f.valueReaders),e=new a.binding.impl.nested.TargetWriter(c,f.valueWriters),a.isDebug&&c.split(".").length>3&&a.utils.log("[BINDING]"+this.getCallerLine()+' Binding target path "'+c+'" has more than 3 parts. Consider using .to(function(value) { target.x.y.x = value; }) instead.')),g}function c(a,b,c){var f=d.findFor(a);f&&e.writeValue(f,c)}var d,e,f=this.impl;return b.apply(this,arguments)?c:null}}(b),!function(a){a.utils.inherit=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.upper=b.prototype,a.prototype.constructor=a}}(b),!function(a){a.utils.every=function(){function a(a,b,c){return Array.prototype.every.call(a,b,c)}function b(a,b,c){for(var d=a.length>>>0,e=0;d>e;e++)if(e in a&&!b.call(c,a[e],e,a))return!1;return!0}function c(){return"function"==typeof Array.prototype.every}return c()?a:b}()}(b),!function(a){var b=a.utils.forEach,c=a.utils.every,d=function(){this.listeners={}};d.prototype={constructor:d,findListeners:function(a){return void 0===this.listeners[a]&&(this.listeners[a]=[]),this.listeners[a]},dispatchEvent:function(a,c){var d=this;b(this.findListeners(a),function(a){a.fn.apply(a.scope||d,c||[])})},addListener:function(a,b,c){this.findListeners(a).push({fn:b,scope:c})},removeListener:function(b,d){var e,f=this.findListeners(b);c(f,function(a){return a.fn===d?(e=a,!1):!0}),e&&a.utils.removeItem(f,e)}},a.model.Observable=d}(b),!function(a){function b(a){return-1===a.indexOf(".")?a:a.substr(0,a.indexOf("."))}function c(a){return-1===a.indexOf(".")?void 0:a.substr(a.indexOf(".")+1)}var d=function(a,e){this.path=a,this.bindingImpl=e,this.sourceProperty=b(a);var f=c(a);f&&(this.child=new d(f,this.bindingImpl),this.child.onValueChanged(this.fireChange,this)),d.upper.constructor.apply(this)};a.utils.inherit(d,a.model.Observable),d.prototype.setSource=function(a){this.stopObserving(),this.source=a,this.startObserving()},d.prototype.onValueChanged=function(a,b){this.addListener("valueChanged",a,b)},d.prototype.stopObserving=function(){this.handler&&this.handler.unbind(),this.child&&this.child.stopObserving()},d.prototype.startObserving=function(){if(this.source){var b=new a.binding.Config(this.bindingImpl).withOptions({allowNotWatchable:!0}).withSource(this.source).withSourceProperties(this.sourceProperty).withTarget(this.valueChanged).withTargetProperty(this);this.handler=new a.binding.Binding(b)}else this.fireChange(void 0)},d.prototype.valueChanged=function(a){this.child?this.child.setSource(a):this.fireChange(a)},d.prototype.fireChange=function(a){this.dispatchEvent("valueChanged",[a])},a.binding.impl.nested.NestedWatcher=d}(b),!function(a){function b(b,c,d){var e;b.iziNestedWatchers||(b.iziNestedWatchers={}),b.iziNestedWatchers[c]||(e=new a.binding.impl.nested.NestedWatcher(c,d),e.onValueChanged(function(a){this.currentValue=a},e),e.setSource(b),b.iziNestedWatchers[c]=e)}function c(c){return function(d,e,f){var g="sourceReader"===f&&a.binding.impl.nested.isNestedProperty(e);return g&&b(d,e,c),g}}function d(a,b){return a.iziNestedWatchers[b].currentValue}a.binding.impl.nested.nestedReader=function(b){return a.binding.impl.createReader(c(b),d)}}(b),!function(a){a.binding.register=function(b){var c={};return c.changeObservers=[a.binding.impl.nested.nestedObserver,a.binding.impl.customPropertyObserver].concat(b.changeObservers),c.valueWriters=[a.binding.impl.nested.nestedWriter].concat(b.valueWriters),c.valueReaders=[a.binding.impl.nested.nestedReader(c)].concat(b.valueReaders),function(b){return new a.binding.Bind(new a.binding.Config(c).withOptions(b||{}))}}}(b),!function(a){var b=a.utils.curry,c=function(a){this.queue=a,a.onTaskStarted(this.startCountDown,this),a.onTaskFinished(this.stopCountDown,this)};c.prototype.startCountDown=function(a){var c=this.queue.timeoutForTask(a.task);c>0&&(this.timeoutId=setTimeout(b(this.timeoutTask,this),c))},c.prototype.timeoutTask=function(){this.queue.currentTaskTimeouted()},c.prototype.stopCountDown=function(){clearTimeout(this.timeoutId)},a.queue.TimeoutGuard=c}(b),!function(a){a.utils.some=function(){function a(a,b,c){return Array.prototype.some.call(a,b,c)}function b(a,b,c){var d=a.length>>>0;if("function"!=typeof b)throw new TypeError;for(var e=0;d>e;e++)if(e in a&&b.call(c,a[e],e,a))return!0;return!1}function c(){return"function"==typeof Array.prototype.some}return c()?a:b}()}(b),!function(a){var b=function(){this.items=[]};b.prototype.set=function(a,b){this.getItemOrCreate(a).value=b},b.prototype.get=function(a){var b=this.getItem(a);return b?b.value:void 0},b.prototype.remove=function(b){var c=this.getItem(b);c&&a.utils.removeItem(this.items,c)},b.prototype.getKeys=function(){var b=[];return a.utils.forEach(this.items,function(a){b.push(a.key)}),b},b.prototype.getKeysOf=function(b){var c=[];return a.utils.forEach(this.items,function(a){a.value===b&&c.push(b)}),c},b.prototype.getValues=function(){var b=[];return a.utils.forEach(this.items,function(a){b.push(a.value)}),b},b.prototype.count=function(){return this.items.length},b.prototype.countValues=function(b){var c=0;return a.utils.forEach(this.items,function(a){a.value===b&&c++}),c},b.prototype.getItemOrCreate=function(a){return this.getItem(a)||this.createItem(a)},b.prototype.createItem=function(a){var b={key:a};return this.items.push(b),b},b.prototype.getItem=function(b){var c=void 0;return a.utils.some(this.items,function(a){return a.key===b?(c=a,!0):!1}),c},a.utils.Map=b}(b),!function(a){var b=function(a,c){b.upper.constructor.apply(this),this.originalFunction=a,this.scope=c,this.logLabel="synchronize.onCallback()"};a.utils.inherit(b,a.model.Observable),b.prototype.synchronizedFunction=function(){try{if(this.originalFunction)return this.originalFunction.apply(this.scope,arguments)}finally{this.dispatchEvent("synchronized",[this])}},a.queue.SynchronizedFunction=b}(b),!function(a){var b=function(a,c,d){b.upper.constructor.apply(this);var e=a.perform(this.doSynchronized,this);this.handler=e.when.apply(e,d).on(c),this.logLabel="synchronize.onEvent()"};a.utils.inherit(b,a.model.Observable),b.prototype.doSynchronized=function(){this.handler.stopObserving(),this.dispatchEvent("synchronized",[this])},a.queue.SynchronizedOnEvent=b}(b),!function(a){var b=function(a,c,d){b.upper.constructor.apply(this);var e=this;c=c||"result",d=d||"error",this.synchronizedResponder={},this.synchronizedResponder[c]=function(){try{a[c].apply(a,arguments)}finally{e.dispatchEvent("synchronized",[e])}},this.synchronizedResponder[d]=function(){try{a[d].apply(a,arguments)}finally{e.dispatchEvent("synchronized",[e])}},this.logLabel="synchronize.responder()"};a.utils.inherit(b,a.model.Observable),a.queue.SynchronizedResponder=b}(b),!function(a){var b=function(b){this.queue=b,this.synchronizations=new a.utils.Map,this.awaitedTasks=new a.utils.Map,this.cancelQueue=function(){b.cancel()}};b.prototype.onCallback=function(b,c){var d=this.obtainTask(),e=new a.queue.SynchronizedFunction(b,c);return this.recordSynchronization(e,d),a.utils.curry(e.synchronizedFunction,e)},b.prototype.onEvent=function(b){var c=this.obtainTask(),d=new a.queue.SynchronizedOnEvent(this.queue.iziApi,b,Array.prototype.slice.call(arguments,1));this.recordSynchronization(d,c)},b.prototype.responder=function(b,c,d){var e=this.obtainTask(),f=new a.queue.SynchronizedResponder(b,c,d);return this.recordSynchronization(f,e).synchronizedResponder},b.prototype.recordSynchronization=function(a,b){return this.queue.log("        "+a.logLabel+" was used by task: "+this.queue.getCurrentTaskIndex()+" of "+this.queue.countTasks()),this.synchronizations.set(a,b),a.addListener("synchronized",this.removeSynchronization,this),a},b.prototype.removeSynchronization=function(a){var b=this.synchronizations.get(a);this.synchronizations.remove(a);var c=this.countSynchronizations(b);this.queue.log("        "+a.logLabel+" completed by task: "+this.queue.getCurrentTaskIndex()+" of "+this.queue.countTasks()),0==c&&this.taskSynchronized(b)},b.prototype.taskSynchronized=function(a){var b=this.awaitedTasks,c=b.get(a);if(c)try{c.fn.apply(c.scope)}finally{b.remove(a)}},b.prototype.countSynchronizations=function(a){return this.synchronizations.countValues(a)},b.prototype.obtainTask=function(){var a=this.queue.currentTask;if(!a)throw new Error("There is no task executed. Please use izi.queue().execute(someTask) and use this method.");return a},b.prototype.hasPendingSynchronizations=function(){return!!this.synchronizations.count()},b.prototype.afterSynchronizingTaskCall=function(a,b){this.awaitedTasks.set(a,b)},b.prototype.taskTimeout=function(b){var c=this.synchronizations,d=c.getKeysOf(b);this.queue.log("    Time outed task: "+this.queue.getCurrentTaskIndex()+" of "+this.queue.countTasks()),this.awaitedTasks.remove(b),a.utils.forEach(d,function(a){c.remove(a)})},a.queue.Synchronizer=b}(b),!function(a){var b=function(a,b){this.functionToExecute=a,this.scope=b};b.prototype.execute=function(){this.functionToExecute.apply(this.scope,arguments)},a.queue.GenericTask=b}(b),!function(a,b){function c(){var a=new Date;return d(a.getHours(),2)+":"+d(a.getMinutes(),2)+":"+d(a.getSeconds(),2)+"."+d(a.getMilliseconds(),3)}function d(a,b){var c=""+a;return new Array(b-c.length+1).join("0")+c}var e=a.utils.typeOf,f=a.utils.mergeObjects,g=a.utils.forEach,h=a.utils.log,i=0,j=function(c,d,e){var g={scope:b,defaultTimeout:0,debug:void 0};this.config=f(g,d),this.iziApi=e,this.queue=[],this.originalQueue=[],this.config.debug&&(i++,this.id=this.config.debug+":"+i),this.delegatedIn=c.createEventDispatcher(),this.dispatchEvent=c.dispatchEvent,this.synchronizer=new a.queue.Synchronizer(this),new a.queue.TimeoutGuard(this)};j.prototype.execute=function(){return this.pushAll(arguments),this.start(),this},j.prototype.push=function(){return this.pushAll(arguments),this},j.prototype.start=function(){if(this.isExecutedTask())throw new Error("Can't start already started queue until it's finished");return this.queue=this.originalQueue.slice(),this.log("Queue started. Total tasks to execute: "+this.countTasks()),this.proceed(),this},j.prototype.cancel=function(){this.log("Queue canceled at executing task: "+this.getCurrentTaskIndex()+" of "+this.countTasks()),this.dispatchTaskEvent("queueCanceled",!0),this.queue=[],this.clearAndProceed()},j.prototype.onTaskStarted=function(a,c){return this.iziApi.perform(a,c||b).when("taskStarted").on(this)},j.prototype.onTaskFinished=function(a,c){return this.iziApi.perform(a,c||b).when("taskFinished").on(this)},j.prototype.onTaskTimeouted=function(a,c){return this.iziApi.perform(a,c||b).when("taskTimeouted").on(this)},j.prototype.onQueueFinished=function(a,c){return this.iziApi.perform(a,c||b).when("queueFinished").on(this)},j.prototype.onQueueCanceled=function(a,c){return this.iziApi.perform(a,c||b).when("queueCanceled").on(this)},j.prototype.pushAll=function(a){var b=this;g(a,function(a,c){if("Function"===e(a))b.pushFunction(a);else{if("Object"!==e(a)||"Function"!==e(a.execute))throw new Error("Invalid queue element given at index: "+c+". Expected Function or Object with execute() function.");b.pushTask(a)}})},j.prototype.pushTask=function(a){this.originalQueue.push(a)},j.prototype.pushFunction=function(b){this.pushTask(new a.queue.GenericTask(b,this.getScope()))},j.prototype.getScope=function(){return this.config.scope},j.prototype.proceed=function(){return this.isExecutedTask()?void 0:this.isEmptyQueue()?(this.log(""),this.log("Queue finished"),void this.dispatchTaskEvent("queueFinished")):void this.executeSynchronously(this.queue.shift())},j.prototype.isEmptyQueue=function(){return 0===this.queue.length},j.prototype.isExecutedTask=function(){return!!this.currentTask},j.prototype.executeSynchronously=function(a){this.currentTask=a,this.log(""),this.log("    Task started: "+this.getCurrentTaskIndex()+" of "+this.countTasks()),this.dispatchTaskEvent("taskStarted",!0),a.execute(this.synchronizer),this.awaitSynchronizerOrProceed()},j.prototype.awaitSynchronizerOrProceed=function(){this.synchronizer.hasPendingSynchronizations()?this.synchronizer.afterSynchronizingTaskCall(this.currentTask,{fn:this.taskSynchronized,scope:this}):(this.log("        No synchronizations used by task: "+this.getCurrentTaskIndex()+" of "+this.countTasks()),this.taskSynchronized())},j.prototype.taskSynchronized=function(){this.log("    Task finished: "+this.getCurrentTaskIndex()+" of "+this.countTasks()),this.dispatchTaskEvent("taskFinished",!0),this.clearAndProceed()},j.prototype.clearAndProceed=function(){this.currentTask=void 0,this.proceed()},j.prototype.dispatchTaskEvent=function(a,b){var c={type:a,queue:this,task:this.currentTask};b&&(c.currentTask=this.getCurrentTaskIndex(),c.totalTasks=this.countTasks()),this.dispatchEvent(this.delegatedIn,a,c)},j.prototype.getCurrentTaskIndex=function(){return this.originalQueue.length-this.queue.length},j.prototype.countTasks=function(){return this.originalQueue.length},j.prototype.timeoutForTask=function(){return this.config.defaultTimeout},j.prototype.currentTaskTimeouted=function(){this.synchronizer.taskTimeout(this.currentTask),this.dispatchTaskEvent("taskTimeouted",!0),this.clearAndProceed()},j.prototype.log=function(a){this.config.debug&&h("[izi.queue:"+this.id+"] "+c()+" "+a)},a.queue.Queue=j}(b,this),!function(a){a.queue.register=function(b,c){return function(d){return new a.queue.Queue(b,d,c)}}}(b),!function(a){a.utils.arrayContains=function(b,c){return-1!==a.utils.indexOf(b,c)}}(b),!function(a){a.utils.ClassNotFound=function(a){this.message='Class name given as string: "'+a+"\" couldn't be resolved as a class"},a.utils.ClassNotFound.prototype=new Error}(b),!function(a){a.utils.getClassByName=function(b,c){var d,e=b.split(".");return d=c,a.utils.forEach(e,function(c){var e=d[c];if(void 0===e)throw new a.utils.ClassNotFound(b);d=e}),d}}(b),!function(a){var b=function(a,b,c){this.Clazz=this._resolveClass(a,c),this.Strategy=b,this.args=[]};b.prototype.createStrategy=function(){return new this.Strategy(this)},b.prototype.getArguments=function(){return this.args},b.prototype.getProperties=function(){return this.props},b.prototype.getClazz=function(){return this.Clazz
},b.prototype.withArgs=function(){if(arguments.length>10)throw new Error("Too many arguments passed. Ten arguments is maximum.");return this.args=arguments,this},b.prototype.withProps=function(a){return this.props=a,this},b.prototype._resolveClass=function(b,c){return"String"===a.utils.typeOf(b)&&(b=a.utils.getClassByName(b,c)),b},a.ioc.Config=b}(b),!function(a){function b(a,b){return a===b}function c(a,b){return a.matchesByType(b)}function d(a,b){var c;b.iziInjectingInProgress=!0;for(c in b){var d=b[c];d&&d.isIziInjection&&d.injector(b,c,d.resolveBean(a))}delete b.iziInjectingInProgress}var e=function(a,b,c){if(this.id=a,this.strategy=b,this.globals=c,this.createdBeans=[],!c)throw new Error("`globals` not defined")};e.prototype.init=function(a){return this.strategy.init(a)},e.prototype.create=function(a){var b=this.strategy.create(a);return b.iziInjectingInProgress?b:(d(a,b),b.iziContext&&!b.iziContextCalled&&(b.iziContextCalled=!0,b.iziContext(a)),b.iziInit&&!b.iziInitCalled&&(b.iziInitCalled=!0,b.iziInit()),this.createdBeans.push(b),b)},e.prototype.destroyCreatedBeans=function(){a.utils.forEach(this.createdBeans,function(a){if(a.iziDestroy)try{a.iziDestroy()}catch(b){}}),this.id=void 0,this.strategy=void 0,this.createdBeans=void 0},e.prototype.preDestroyCreatedBeans=function(){a.utils.forEach(this.createdBeans,function(a){a.iziPreDestroy&&a.iziPreDestroy()})},e.prototype.matches=function(d){return"string"==typeof d?-1!==d.indexOf(".")?c(this.strategy,a.utils.getClassByName(d,this.globals)):b(this.id,d):c(this.strategy,d)},e.prototype.getArgumentsDependencies=function(b){function c(c){var d=[];return a.utils.forEach(c,function(a){a&&a.isIziInjection&&d.push(a.findBeanBuilder(b))}),d}return c(this.strategy.getArguments())},a.ioc.bean.BeanBuilder=e}(b),!function(a){var b=function(a){this.instance=a};b.prototype.init=function(){return this.instance},b.prototype.create=function(){return this.instance},b.prototype.matchesByType=function(a){return this.instance instanceof a},b.prototype.getArguments=function(){return[]},a.ioc.bean.InstanceStrategy=b}(b),!function(a){a.ioc.bean.NoBeanMatched=function(a){this.message="No bean matched: "+a}}(b),!function(a){function b(b){return"Array"===a.utils.typeOf(b)?c(b):b}function c(b){var c={};return a.utils.forEach(b,function(a){d(a,function(a,b){if(void 0!==c[a])throw new Error('Found duplicated bean ID: "'+a+'" in multiple configurations');c[a]=b})}),c}function d(b,c){for(var d in b)a.utils.hasOwnProperty(b,d)&&c(d,b[d])}function e(b,c,d){var e,f,g;for(e in b)if(a.utils.hasOwnProperty(b,e)){if(f=b[e],f instanceof a.ioc.Config)g=new a.ioc.bean.BeanBuilder(e,f.createStrategy(),d);else if("Function"===a.utils.typeOf(f)){var h=new a.ioc.Config(f,a.ioc.bean.SingletonStrategy,d);g=new a.ioc.bean.BeanBuilder(e,h.createStrategy(),d)}else g=new a.ioc.bean.BeanBuilder(e,new a.ioc.bean.InstanceStrategy(f),d);c.push(g)}}function f(b,c){function d(e){var f=e.getArgumentsDependencies(b);a.utils.forEach(f,function(a){if(a===c)throw new Error("Circular dependencies found. If it is possible try inject those dependencies by properties instead by arguments.");d(a)})}d(c)}function g(a,b){return f(a,b),b.init(a)}function h(b,c){var d,e=[];a.utils.forEach(c,function(a){d=g(b,a),d&&e.push(a)}),a.utils.forEach(e,function(a){a.create(b)})}function i(){return{isPrevented:!1,isDestroyPrevented:function(){return this.isPrevented},preventDestroy:function(){this.isPrevented=!0}}}function j(a){function b(b){if(e.dispatchEvent("preDestroy",arguments),!b.isDestroyPrevented()){var c=a.doPreDestroy();c||b.preventDestroy()}}function c(){f.removeListener("destroy",c),f.removeListener("preDestroy",b),e.dispatchEvent("destroy",arguments),a.doDestroy()}var d=a.parentContext,e=a.destroyDispatcher,f=d&&d.destroyDispatcher;f&&(f.addListener("preDestroy",b),f.addListener("destroy",c))}var k=function(c,d,e){this.globals=c,this.beans=b(d),this.destroyDispatcher=new a.model.Observable,this.parentContext=e,this.beansBuilders=[],j(this)};k.prototype.initContext=function(){return e(this.beans,this.beansBuilders,this.globals),h(this,this.beansBuilders),this},k.prototype.getBean=function(b){var c=this.findBeanBuilder(b);if(!c)throw new a.ioc.bean.NoBeanMatched(b);return c.create(this)},k.prototype.wire=function(b){var c=new a.ioc.bean.InstanceStrategy(b),d=new a.ioc.bean.BeanBuilder("",c,this.globals);return this.beansBuilders.push(d),d.create(this)},k.prototype.destroy=function(){var a=this.destroyDispatcher,b=i();if(a.dispatchEvent("preDestroy",[b]),b.isDestroyPrevented())return!1;var c=this.doPreDestroy();return c?(a.dispatchEvent("destroy"),this.doDestroy(),!0):!1},k.prototype.doPreDestroy=function(){return a.utils.every(this.beansBuilders,function(a){try{return a.preDestroyCreatedBeans(),!0}catch(b){return!1}})},k.prototype.doDestroy=function(){return a.utils.forEach(this.beansBuilders,function(a){a.destroyCreatedBeans()}),this.beansBuilders=[],this.beans=void 0,this.parentContext=void 0,this.destroyDispatcher=void 0,!0},k.prototype.findBeanBuilder=function(b){var c=null;return a.utils.forEach(this.beansBuilders,function(a){if(a.matches(b)){if(c)throw new Error("Ambiguous reference to bean by type. Please refer by id.");c=a}}),c||void 0===this.parentContext||(c=this.parentContext.findBeanBuilder(b)),c},a.ioc.BeansContext=k}(b),!function(a){function b(a,b,c){a[b]=c}function c(a){return a}var d=function(d){this.beanIdOrType=d,this.getCallerLine=a.utils.getCallerLineProvider(2),this.injector=b,this.dependencyConverter=c};d.prototype.getBeanNotFoundMessage=function(){var b;return b="Function"===a.utils.typeOf(this.beanIdOrType)?this.beanIdOrType.name||this.beanIdOrType:this.beanIdOrType,"Bean: `"+b+"` couldn't be found from injection at line:\n"+this.getCallerLine()},d.prototype.resolveBean=function(b){var c;try{c=b.getBean(this.beanIdOrType)}catch(d){throw d instanceof a.utils.ClassNotFound||d instanceof a.ioc.bean.NoBeanMatched?new Error(this.getBeanNotFoundMessage()):d}return this.dependencyConverter(c)},d.prototype.by=function(b){if("Function"!==a.utils.typeOf(b))throw new Error("Injector should be a function with target, prop, dependency arguments");return this.injector=b,this},d.prototype.through=function(b){if("Function"!==a.utils.typeOf(b))throw new Error("Dependency converter should be a function with dependency argument");return this.dependencyConverter=b,this},d.prototype.property=function(a){return this.through(function(b){return b[a]})},d.prototype.findBeanBuilder=function(a){var b=a.findBeanBuilder(this.beanIdOrType);if(null===b)throw new Error(this.getBeanNotFoundMessage());return b},d.prototype.isIziInjection=!0,a.ioc.Injection=d}(b),!function(a){a.ioc.bean.createInstance=function(b,c,d,e){function f(a,b){var c,d,e=[];for(c=0;c<a.length;c+=1)d=a[c],e.push(d&&d.isIziInjection?d.resolveBean(b):d);return e}function g(b,c){if(void 0!==c)for(var d in c)a.utils.hasOwnProperty(c,d)&&(b[d]=c[d])}"String"===a.utils.typeOf(b)&&(b=a.utils.getClassByName(b,e.globals));var h,i=f(c,e),j=i.length;if(0===j)h=new b;else if(1===j)h=new b(i[0]);else if(2===j)h=new b(i[0],i[1]);else if(3===j)h=new b(i[0],i[1],i[2]);else if(4===j)h=new b(i[0],i[1],i[2],i[3]);else if(5===j)h=new b(i[0],i[1],i[2],i[3],i[4]);else if(6===j)h=new b(i[0],i[1],i[2],i[3],i[4],i[5]);else if(7===j)h=new b(i[0],i[1],i[2],i[3],i[4],i[5],i[6]);else if(8===j)h=new b(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);else if(9===j)h=new b(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8]);else{if(10!==j)throw new Error("Too many arguments given");h=new b(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9])}return g(h,d),h}}(b),!function(a){var b=function(a){this.Clazz=a.getClazz(),this.args=a.getArguments(),this.props=a.getProperties(),this.instance=void 0};b.prototype.createInstance=function(b){return this.instance||(this.instance=a.ioc.bean.createInstance(this.Clazz,this.args,this.props,b)),this.instance},b.prototype.init=function(a){return this.createInstance(a)},b.prototype.create=function(a){return this.createInstance(a)},b.prototype.matchesByType=function(a){return a===this.Clazz},b.prototype.getArguments=function(){return this.args},a.ioc.bean.SingletonStrategy=b}(b),!function(a){var b=function(a){this.Clazz=a.getClazz(),this.args=a.getArguments(),this.props=a.getProperties(),this.instance=void 0};b.prototype.init=function(){return null},b.prototype.create=function(b){return this.instance||(this.instance=a.ioc.bean.createInstance(this.Clazz,this.args,this.props,b)),this.instance},b.prototype.matchesByType=function(a){return a===this.Clazz},b.prototype.getArguments=function(){return this.args},a.ioc.bean.LazySingletonStrategy=b}(b),!function(a){var b=function(a){this.Clazz=a.getClazz(),this.args=a.getArguments(),this.props=a.getProperties()};b.prototype.init=function(){return null},b.prototype.create=function(b){return a.ioc.bean.createInstance(this.Clazz,this.args,this.props,b)},b.prototype.matchesByType=function(a){return a===this.Clazz},b.prototype.getArguments=function(){return this.args},a.ioc.bean.PrototypeStrategy=b}(b),!function(a){a.utils.setterOf=function(b){return"set"+a.utils.capitalize(b)}}(b),!function(a){function b(b){var c=[];return f(b,function(b){b="Object"===a.utils.typeOf(b)?b:{name:b},b.getter=a.utils.getterOf(b.name),b.setter=a.utils.setterOf(b.name),c.push(b)}),c}function c(b){return b&&"Function"===a.utils.typeOf(b.toPlainObject)}function d(a,b,c,d){a.prototype[b]=function(a){if(0===arguments.length)return this[c]();if(1===arguments.length)return this[d](a);throw new Error("Too many arguments. Setter function requires exactly one argument")},a.prototype[c]=function(){return this.get(b)},a.prototype[d]=function(a){return this.set(b,a)}}function e(a){var b={};return f(a,function(a){a.hasOwnProperty("defaultValue")?b[a.name]=a.defaultValue:a.hasOwnProperty("initialValue")&&(b[a.name]=a.initialValue)}),b}var f=a.utils.forEach,g=function(){g.upper.constructor.apply(this,arguments),this.init()};a.utils.inherit(g,a.model.Observable),g.prototype.isIziModel=!0,g.prototype.init=function(){},g.prototype.get=function(a){return this.data[a]},g.prototype.set=function(b,c){if(1===arguments.length&&"Object"===a.utils.typeOf(b)){for(var d in b)b.hasOwnProperty(d)&&this.set(d,b[d]);return this}var e=this.data[b];return this.equals(e,c)||(this.data[b]=c,this.dispatchChange(b,c,e)),this},g.prototype.dispatchChange=function(a,b,c){this.dispatchEvent(a+"Change",[b,c]),this.dispatchEvent("change",[a,b,c])},g.prototype.equals=function(b,c){return"Array"===a.utils.typeOf(b)&&"Array"===a.utils.typeOf(c)?this.equalsArray(b,c):b===c},g.prototype.equalsArray=function(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},g.prototype.iziObserveProperty=function(a,b){var c=this,d=a+"Change";return c.addListener(d,b),function(){c.removeListener(d,b)}},g.prototype.iziObserveWidget=function(a,b,c){var d=this,e=a.getEventType();return d.addListener(e,b,c),function(){d.removeListener(e,b)}},g.prototype.toPlainObject=function(){var b,d={},e="__iziCircularCopy__",g=e in this,h=this[e];return g?h():(this[e]=function(){return d},f(this.fields,function(e){var g=this[e.getter]();c(g)?d[e.name]=g.toPlainObject():"Array"===a.utils.typeOf(g)?(b=[],f(g,function(a){b.push(c(a)?a.toPlainObject():a)}),d[e.name]=b):g&&"Function"===a.utils.typeOf(g.forEach)?(b=[],g.forEach(function(a){b.push(c(a)?a.toPlainObject():a)}),d[e.name]=b):d[e.name]=g},this),delete this[e],d)},g.define=function(c){var h=b(c.fields),i=function(){this.data=e(h),this.fields=h,i.upper.constructor.apply(this)};a.utils.inherit(i,g),f(h,function(a){d(i,a.name,a.getter,a.setter)});for(var j in c)a.utils.hasOwnProperty(c,j)&&"fields"!=j&&(i.prototype[j]=c[j]);return i},a.model.Model=g}(b),!function(a){var b=function(){a.events.EventConfig.apply(this,arguments),this.expectedKeyCode=0};b.prototype=new a.events.EventConfig,b.prototype.constructor=b,b.prototype.isKeyboardEventConfig=!0,b.prototype.keyCode=function(a){return this.expectedKeyCode=a,this},b.prototype.getExpectedKeyCode=function(){return this.expectedKeyCode},b.prototype.BACKSPACE=function(){return this.keyCode(8)},b.prototype.TAB=function(){return this.keyCode(9)},b.prototype.NUM_CENTER=function(){return this.keyCode(12)},b.prototype.ENTER=function(){return this.keyCode(13)},b.prototype.RETURN=function(){return this.keyCode(13)},b.prototype.SHIFT=function(){return this.shift(),this.keyCode(16)},b.prototype.CTRL=function(){return this.ctrl(),this.keyCode(17)},b.prototype.ALT=function(){return this.alt(),this.keyCode(18)},b.prototype.PAUSE=function(){return this.keyCode(19)},b.prototype.CAPS_LOCK=function(){return this.keyCode(20)},b.prototype.ESC=function(){return this.keyCode(27)},b.prototype.SPACE=function(){return this.keyCode(32)},b.prototype.PAGE_UP=function(){return this.keyCode(33)},b.prototype.PAGE_DOWN=function(){return this.keyCode(34)},b.prototype.END=function(){return this.keyCode(35)},b.prototype.HOME=function(){return this.keyCode(36)},b.prototype.LEFT=function(){return this.keyCode(37)},b.prototype.UP=function(){return this.keyCode(38)},b.prototype.RIGHT=function(){return this.keyCode(39)},b.prototype.DOWN=function(){return this.keyCode(40)},b.prototype.PRINT_SCREEN=function(){return this.keyCode(44)},b.prototype.INSERT=function(){return this.keyCode(45)},b.prototype.DELETE=function(){return this.keyCode(46)},b.prototype.ZERO=function(){return this.keyCode(48)},b.prototype.ONE=function(){return this.keyCode(49)},b.prototype.TWO=function(){return this.keyCode(50)},b.prototype.THREE=function(){return this.keyCode(51)},b.prototype.FOUR=function(){return this.keyCode(52)},b.prototype.FIVE=function(){return this.keyCode(53)},b.prototype.SIX=function(){return this.keyCode(54)},b.prototype.SEVEN=function(){return this.keyCode(55)},b.prototype.EIGHT=function(){return this.keyCode(56)},b.prototype.NINE=function(){return this.keyCode(57)},b.prototype.A=function(){return this.keyCode(65)},b.prototype.B=function(){return this.keyCode(66)},b.prototype.C=function(){return this.keyCode(67)},b.prototype.D=function(){return this.keyCode(68)},b.prototype.E=function(){return this.keyCode(69)},b.prototype.F=function(){return this.keyCode(70)},b.prototype.G=function(){return this.keyCode(71)},b.prototype.H=function(){return this.keyCode(72)},b.prototype.I=function(){return this.keyCode(73)},b.prototype.J=function(){return this.keyCode(74)},b.prototype.K=function(){return this.keyCode(75)},b.prototype.L=function(){return this.keyCode(76)},b.prototype.M=function(){return this.keyCode(77)},b.prototype.N=function(){return this.keyCode(78)},b.prototype.O=function(){return this.keyCode(79)},b.prototype.P=function(){return this.keyCode(80)},b.prototype.Q=function(){return this.keyCode(81)},b.prototype.R=function(){return this.keyCode(82)},b.prototype.S=function(){return this.keyCode(83)},b.prototype.T=function(){return this.keyCode(84)},b.prototype.U=function(){return this.keyCode(85)},b.prototype.V=function(){return this.keyCode(86)},b.prototype.W=function(){return this.keyCode(87)},b.prototype.X=function(){return this.keyCode(88)},b.prototype.Y=function(){return this.keyCode(89)},b.prototype.Z=function(){return this.keyCode(90)},b.prototype.NUM_ZERO=function(){return this.keyCode(96)},b.prototype.NUM_ONE=function(){return this.keyCode(97)},b.prototype.NUM_TWO=function(){return this.keyCode(98)},b.prototype.NUM_THREE=function(){return this.keyCode(99)},b.prototype.NUM_FOUR=function(){return this.keyCode(100)},b.prototype.NUM_FIVE=function(){return this.keyCode(101)},b.prototype.NUM_SIX=function(){return this.keyCode(102)},b.prototype.NUM_SEVEN=function(){return this.keyCode(103)},b.prototype.NUM_EIGHT=function(){return this.keyCode(104)},b.prototype.NUM_NINE=function(){return this.keyCode(105)},b.prototype.NUM_MULTIPLY=function(){return this.keyCode(106)},b.prototype.NUM_PLUS=function(){return this.keyCode(107)},b.prototype.NUM_MINUS=function(){return this.keyCode(109)},b.prototype.NUM_PERIOD=function(){return this.keyCode(110)},b.prototype.NUM_DIVISION=function(){return this.keyCode(111)},b.prototype.F1=function(){return this.keyCode(112)},b.prototype.F2=function(){return this.keyCode(113)},b.prototype.F3=function(){return this.keyCode(114)},b.prototype.F4=function(){return this.keyCode(115)},b.prototype.F5=function(){return this.keyCode(116)},b.prototype.F6=function(){return this.keyCode(117)},b.prototype.F7=function(){return this.keyCode(118)},b.prototype.F8=function(){return this.keyCode(119)},b.prototype.F9=function(){return this.keyCode(120)},b.prototype.F10=function(){return this.keyCode(121)},b.prototype.F11=function(){return this.keyCode(122)},b.prototype.F12=function(){return this.keyCode(123)},a.events.KeyboardConfig=b}(b),!function(a){var b=function(){};b.prototype.event=function(b){return new a.events.EventConfig(b)},b.prototype.keyboardEvent=function(b){return new a.events.KeyboardConfig(b)},b.prototype.keyDown=function(){return this.keyboardEvent("keydown")},b.prototype.keyUp=function(){return this.keyboardEvent("keyup")},b.prototype.afterPrint=function(){return this.event("afterprint")},b.prototype.beforePrint=function(){return this.event("beforeprint")},b.prototype.beforeOnLoad=function(){return this.event("beforeonload")},b.prototype.error=function(){return this.event("error")},b.prototype.hasChange=function(){return this.event("haschange")},b.prototype.load=function(){return this.event("load")},b.prototype.message=function(){return this.event("message")},b.prototype.offline=function(){return this.event("offline")},b.prototype.line=function(){return this.event("line")},b.prototype.pageHide=function(){return this.event("pagehide")},b.prototype.pageShow=function(){return this.event("pageshow")},b.prototype.popState=function(){return this.event("popstate")},b.prototype.redo=function(){return this.event("redo")},b.prototype.resize=function(){return this.event("resize")},b.prototype.storage=function(){return this.event("storage")},b.prototype.undo=function(){return this.event("undo")},b.prototype.unload=function(){return this.event("unload")},b.prototype.blur=function(){return this.event("blur")},b.prototype.change=function(){return this.event("change")},b.prototype.contextMenu=function(){return this.event("contextmenu")},b.prototype.focus=function(){return this.event("focus")},b.prototype.formChange=function(){return this.event("formchange")},b.prototype.formInput=function(){return this.event("forminput")},b.prototype.input=function(){return this.event("input")},b.prototype.invalid=function(){return this.event("invalid")},b.prototype.reset=function(){return this.event("reset")},b.prototype.select=function(){return this.event("select")},b.prototype.submit=function(){return this.event("submit")},b.prototype.click=function(){return this.event("click")},b.prototype.dblClick=function(){return this.event("dblclick")},b.prototype.drag=function(){return this.event("drag")},b.prototype.dragEnd=function(){return this.event("dragend")},b.prototype.dragEnter=function(){return this.event("dragenter")},b.prototype.dragLeave=function(){return this.event("dragleave")},b.prototype.dragOver=function(){return this.event("dragover")},b.prototype.dragStart=function(){return this.event("dragstart")},b.prototype.drop=function(){return this.event("drop")},b.prototype.mouseDown=function(){return this.event("mousedown")},b.prototype.mouseMove=function(){return this.event("mousemove")},b.prototype.mouseOut=function(){return this.event("mouseout")},b.prototype.mouseOver=function(){return this.event("mouseover")},b.prototype.mouseUp=function(){return this.event("mouseup")},b.prototype.mouseWheel=function(){return this.event("mousewheel")},b.prototype.scroll=function(){return this.event("scroll")},b.prototype.abort=function(){return this.event("abort")},b.prototype.canPlay=function(){return this.event("canplay")},b.prototype.canPlayThrough=function(){return this.event("canplaythrough")},b.prototype.durationChange=function(){return this.event("durationchange")},b.prototype.emptied=function(){return this.event("emptied")},b.prototype.ended=function(){return this.event("ended")},b.prototype.loadedData=function(){return this.event("loadeddata")},b.prototype.loadedMetaData=function(){return this.event("loadedmetadata")},b.prototype.loadStart=function(){return this.event("loadstart")},b.prototype.pause=function(){return this.event("pause")},b.prototype.play=function(){return this.event("play")},b.prototype.playing=function(){return this.event("playing")},b.prototype.progress=function(){return this.event("progress")},b.prototype.rateChange=function(){return this.event("ratechange")},b.prototype.readyStateChange=function(){return this.event("readystatechange")},b.prototype.seeked=function(){return this.event("seeked")},b.prototype.seeking=function(){return this.event("seeking")},b.prototype.stalled=function(){return this.event("stalled")},b.prototype.suspend=function(){return this.event("suspend")},b.prototype.timeUpdate=function(){return this.event("timeupdate")},b.prototype.volumeChange=function(){return this.event("volumechange")},b.prototype.waiting=function(){return this.event("waiting")},b.prototype.touchStart=function(){return this.event("touchstart")},b.prototype.touchMove=function(){return this.event("touchmove")},b.prototype.touchEnd=function(){return this.event("touchend")},b.prototype.touchCancel=function(){return this.event("touchcancel")},b.prototype.touchEnter=function(){return this.event("touchenter")},b.prototype.touchLave=function(){return this.event("touchlave")},b.prototype.gestureStart=function(){return this.event("gesturestart")},b.prototype.gestureChange=function(){return this.event("gesturechange")},b.prototype.gestureEnd=function(){return this.event("gestureend")},b.prototype.orientationChange=function(){return this.event("orientationchange")},a.events.Events=b}(b),!function(b,c){function d(a,b){b.behavior&&a.registerBehaviorImpl(b.behavior),b.binding&&a.registerBindingImpl(b.binding),b.queue&&a.registerQueueImpl(b.queue)}function e(a){c.izi&&b.utils.forEach(g,function(b){c.izi[b]&&(a[b]=c.izi[b])})}var f={},g=["arg","sanityInjectTo","sanityOf","varargOf"],h=function(a,g){this.globals=g||c,e(this),"String"===b.utils.typeOf(a)&&(a=f[a]),a&&(this._framework=a,d(this,a))};h.prototype.bakeBeans=function(a,c){return new b.ioc.BeansContext(this.globals,a,c).initContext()},h.prototype.instantiate=function(a){return new b.ioc.Config(a,b.ioc.bean.SingletonStrategy,this.globals)},h.prototype.lazy=function(a){return new b.ioc.Config(a,b.ioc.bean.LazySingletonStrategy,this.globals)},h.prototype.protoOf=function(a){return new b.ioc.Config(a,b.ioc.bean.PrototypeStrategy,this.globals)},h.prototype.inject=function(a){if(!a)throw new Error("Trying to inject invalid empty bean");return new b.ioc.Injection(a)},h.prototype.perform=function(){throw new Error("Register your behavior implementation first: izi.registerBehaviorImpl(Izi.behavior.impl.SomeImpl)")},h.prototype.registerBehaviorImpl=function(a){this.perform=b.behavior.register(a,this)},h.prototype.bind=function(){throw new Error("Register your binding implementation first: izi.registerBindingImpl(Izi.binding.impl.SomeImpl)")},h.prototype.registerBindingImpl=function(a){this.bind=b.binding.register(a)},h.prototype.modelOf=function(a){return b.model.Model.define(a)},h.prototype.events=new b.events.Events,h.prototype.queue=function(){throw new Error("Register your queue implementation first: izi.registerQueueImpl(Izi.queue.impl.SomeImpl)")},h.prototype.registerQueueImpl=function(a){this.queue=b.queue.register(a,this)},h.prototype.newInstance=function(a,b){return new h(a||this._framework,b)},h.prototype.sandboxed=function(a){return this.newInstance(null,a)},b.registerFramework=function(a,b){f[a]=b},h.prototype.module=b,b.Api=h,a=new h}(b,this),a}"function"==typeof define&&"object"==typeof define.amd&&"dojotoolkit.org"!==define.amd.vendor?define([],b):"object"==typeof exports?module.exports=b():a.izi=b()}(this);
//# sourceMappingURL=izi-js.min.js.map